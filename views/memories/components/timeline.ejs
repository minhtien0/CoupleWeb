<!-- Timeline View -->
<div id="timeline-view" class="space-y-6 hidden">
    <!-- Timeline Stats -->
    <div class="bg-white rounded-2xl p-6 shadow-sm border border-rose-100">
        <div class="flex items-center justify-between mb-4">
            <h2 class="text-lg font-semibold text-gray-800">Dòng thời gian</h2>
            <div class="animate-float">⏰</div>
        </div>
        <div class="text-center">
            <%
                            function formatDateVN(dateStr) {
                                if (!dateStr) return '';
                                const d = new Date(dateStr);
                                if (isNaN(d)) return dateStr;
                                const dd = String(d.getDate()).padStart(2, '0');
                                const mm = String(d.getMonth() + 1).padStart(2, '0');
                                const yyyy = d.getFullYear();
                                return `${dd}/${mm}/${yyyy}`;
                            }
                            const start = new Date(coupleInfo.started_at_couple);
                            const today = new Date();
                            const diff = Math.floor((today - start) / (1000*60*60*24));
                            %>
                <div id="timeline-days" class="text-3xl font-bold text-amber-600 mb-1">
                    <%=diff%>
                </div>
                <div class="text-sm text-gray-600">ngày yêu nhau</div>
                <div id="timeline-start" class="text-xs text-gray-500 mt-1">Từ
                    <%=formatDateVN(coupleInfo.started_at_couple)%>
                </div>
        </div>
    </div>

    <!-- Timeline -->
    <div class="relative">
        <!-- Timeline line -->
        <div class="absolute left-6 top-0 bottom-0 w-0.5 bg-gradient-to-b from-rose-300 to-amber-300"></div>

        <div id="timeline-entries-list" class="space-y-6 pl-10">
            <!-- dynamic timeline entries -->
        </div>
    </div>
</div>
<script>
    function renderTimeline() {
        const container = document.getElementById('timeline-entries-list');
        container.innerHTML = '';
        timeline.forEach(t => {
            const el = document.createElement('div');
            el.className = 'flex items-start space-x-4';
            el.innerHTML = `
                    <div class="w-3 h-3 bg-rose-500 rounded-full mt-3 relative z-10 timeline-dot"></div>
                    <div class="flex-1 bg-white rounded-2xl p-4 shadow-sm border border-rose-100 memory-card">
                        <div class="flex items-center justify-between mb-2">
                            <span class="text-sm font-medium text-rose-600">${relativeDayLabel(t.date)} • ${formatDateVN(t.date)}</span>
                        </div>
                        <h4 class="font-medium text-gray-800 mb-1">${t.title}</h4>
                        <p class="text-sm text-gray-600">${t.note || ''}</p>
                    </div>
                `;
            container.appendChild(el);
        });
    }
</script>